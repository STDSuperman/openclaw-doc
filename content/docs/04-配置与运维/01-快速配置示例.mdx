---
title: "快速配置示例"
category: "配置与运维"
difficulty: "入门"
estimated_time: "10分钟阅读"
tags:
  - 配置
  - 示例
  - 快速开始
prerequisites:
  - "[配置文件说明](./00-配置文件说明.md)"
related_docs:
  - ["完整配置参考"]
next_steps:
  - ["完整配置参考", "Gateway运维"]
last_updated: "2026-02-01"
source: "docs/gateway/configuration-examples.md"
---

# 快速配置示例

> **TL;DR**: 快速配置 OpenClaw 的关键设置，5分钟即可上手。


---

## 基础配置（最简单）

### 示例 1：最小配置

**适用场景**：首次安装，快速测试

```json5
{
  // ========== 基础 Gateway 配置 ==========
  "gateway": {
    "port": 18789,
    "bind": "loopback",
    "auth": {
      "token": "自动生成的令牌"
    }
  },
  
  // ========== 模型配置 ==========
  "agents": {
    "defaults": {
      "model": "anthropic/claude-opus-4-5",
      "sandbox": {
        "mode": "non-main"
      }
    }
  },
  
  // ========== 消息通道配置 ==========
  "channels": {
    "whatsapp": {
      "allowFrom": ["+86999999900"]
    }
  },
  
  // ========== 安全配置 ==========
  "security": {
    "pairing": {
      "approveLocal": true
    }
  }
}
```

**说明**：
- ✅ 本地 Gateway（loopback）
- ✅ Anthropic Claude 3.5 Opus
- ✅ 只允许自己的号码（WhatsApp）
- ✅ 自动批准本地连接

---

## 示例 2：推荐配置（日常使用）

**适用场景**：日常使用，平衡安全性和便利性

```json5
{
  // ========== 增强的 Gateway 配置 ==========
  "gateway": {
    "port": 18789,
    "bind": "loopback",
    "auth": {
      "token": "your-secure-token-here"
    },
    "tailscale": {
      "mode": "off"
    }
  },
  
  // ========== 模型配置 ==========
  "models": {
    "providers": {
      "anthropic": {
        "apiKey": "$ANTHROPIC_API_KEY",
        "region": "us-east-1",
        "maxRetries": 3,
        "timeoutMs": 60000
      }
    },
    "defaultModel": "anthropic/claude-opus-4-5"
  },
  
  // ========== 通道配置 ==========
  "channels": {
    "whatsapp": {
      "allowFrom": ["+86999999900", "+86999999901"],
      "groups": {
        "*": {
          "requireMention": true
        }
      }
    },
    "telegram": {
      "botToken": "$TELEGRAM_BOT_TOKEN",
      "allowFrom": [],
      "groups": {
        "*": {
          "requireMention": true
        }
      }
    },
    "discord": {
      "token": "$DISCORD_BOT_TOKEN",
      "guilds": {
        "987654321": {
          "channels": ["general"],
          "requireMention": true
        }
      }
    }
  },
  
  // ========== 会话配置 ==========
  "session": {
    "maxMessages": 100,
    "compactThreshold": 80,
    "autoCompact": true,
    "idleTimeout": 3600
  },
  
  // ========== 安全配置 ==========
  "security": {
    "pairing": {
      "approveLocal": true,
      "timeout": 300
    },
    "sandbox": {
      "mode": "non-main"
    }
  }
}
```

**说明**：
- ✅ 使用环境变量存储 API Key
- ✅ WhatsApp 和 Telegram 都启用群组@提及
- ✅ Discord 配置特定服务器和频道
- ✅ 会话自动压缩，保持 100 条消息
- ✅ 非主会话启用沙盒模式

---

## 示例 3：开发者配置

**适用场景**：开发环境，需要更多功能

```json5
{
  // ========== 开发者配置 ==========
  "tools": {
    "web": {
      "search": {
        "apiKey": "$BRAVE_SEARCH_API_KEY",
        "provider": "brave"
      }
    },
    "media": {
      "audio": {
        "enabled": true,
        "model": "openai/whisper-1"
      },
      "video": {
        "enabled": false
      }
    }
  },
  
  // ========== 调试配置 ==========
  "logging": {
    "level": "debug",
    "console": {
      "level": "verbose"
    },
    "file": {
      "level": "info",
      "path": "/tmp/openclaw/debug.log"
    }
  },
  
  // ========== 自动化配置 ==========
  "automation": {
    "webhook": {
      "enabled": true,
      "timeoutMs": 5000
    },
    "cron": {
      "enabled": true
      "jobs": []
    }
  }
}
```

**说明**：
- ✅ 启用 Web 搜索（Brave）
- ✅ 启用音频转录（OpenAI Whisper）
- ✅ 详细日志输出（debug 级别）
- ✅ 启用 Webhook 和 Cron 自动化

---

## 快速配置命令

### 使用环境变量设置

```bash
# 设置 Anthropic API Key
export ANTHROPIC_API_KEY="sk-ant-xxx"

# 设置 OpenAI API Key
export OPENAI_API_KEY="sk-proj-xxx"

# 设置 Telegram Bot Token
export TELEGRAM_BOT_TOKEN="123456:ABC-DEF"

# 快速应用配置
cat > ~/.openclaw/openclaw.json <<'EOF
{
  "agents": {
    "defaults": {
      "model": "anthropic/claude-opus-4-5"
    }
  }
}
EOF

# 验证配置
openclaw doctor
```

### 使用 CLI 快速配置

```bash
# 配置 WhatsApp 允许列表
openclaw config set channels.whatsapp.allowFrom '["+86999999900", "+86999999901"]'

# 设置会话最大消息数
openclaw config set session.maxMessages 50

# 启用自动压缩
openclaw config set session.autoCompact true

# 验证配置
openclaw config get
```

---

## 不同场景的配置

### 场景 1：个人使用（单用户）

**推荐配置**：
- ✅ 使用主会话（无沙盒）
- ✅ 仅允许自己的号码
- ✅ 禁用群组支持

### 场景 2：家庭使用（多人）

**推荐配置**：
- ⚠️ 为每个用户创建独立会话
- ✅ 使用 DM 配对机制
- ✅ 启用沙盒模式

### 场景 3：工作区使用（团队）

**推荐配置**：
- ✅ 创建专用工作空间
- ✅ 配置特定模型
- ✅ 限制工具权限

### 场景 4：开发环境

**推荐配置**：
- ✅ 最低安全要求
- ✅ 详细日志记录
- ✅ 禁用自动压缩
- ✅ 更快的响应时间

---

## 配置检查清单

部署前检查：

- [ ] 已设置 API Key（环境变量或配置文件）
- [ ] 已配置至少一个消息通道
- [ ] 验证配置文件语法（`openclaw doctor`）
- [ ] 了解安全最佳实践
- [ ] 准备好备份策略

---

## 下一步

- [完整配置参考](./02-完整配置参考.md) - 查看所有配置选项
- [Gateway 运维](./03-Gateway运维.md) - 学习如何管理和监控 Gateway
- [消息通道配置](../02-消息通道/) - 详细配置各平台通道
- [安全配置](./06-安全配置.md) - 了解安全策略

---

<ai-search-key>
配置, 示例, 快速配置, 最小配置, 推荐配置, 开发配置, 环境变量, CLI 配置, 个人使用, 家庭使用, 工作区, 开发环境, WhatsApp, Telegram, Discord, 会话, 沙盒, 安全, 模型, 工具, 日志, 自动化, 检查清单
</ai-search-key>

**快速配置要点总结**：
- 🎯 **最简单**：最小配置，快速上手
- 📋 **推荐配置**：平衡安全和便利性
- 🛠️ **开发者配置**：适合开发环境
- 🔧 **环境变量**：优先于配置文件存储敏感信息
- ⚡ **CLI 工具**：快速设置和验证配置
- ✅ **不同场景**：个人/家庭/工作区/开发环境的配置建议
- 📋 **检查清单**：部署前的验证步骤

*更多信息请参考 [文档导航](../00-文档导航.md)*
