---
title: "斜杠命令"
category: "工具与功能"
difficulty: "intermediate"
estimated_time: "25 min"
tags: ["斜杠命令", "slash", "命令", "自动化"]
prerequisites: ["基础使用", "配置与运维"]
related_docs: ["消息工具", "会话管理", "配置文件说明"]
next_steps: []
last_updated: "2026-01-01"
source: "docs/tools/slash-commands.md"
---


# 斜杠命令

命令由 Gateway 处理。大多数命令必须作为**独立的**消息发送,消息以 `/` 开头。
仅限主机的 bash 聊天命令使用 `! <cmd>`(将 `/bash <cmd>` 作为别名)。

## 相关系统

有两个相关的系统:

- **Commands**: 独立的 `/...` 消息
- **Directives**: `/think`, `/verbose`, `/reasoning`, `/elevated`, `/exec`, `/model`, `/queue`
  - 指令在模型看到消息之前从消息中剥离
  - 在正常聊天消息(非仅指令)中,它们被视为"内联提示"并**不**持久化会话设置
  - 在仅指令消息(消息仅包含指令)中,它们持久化到会话并使用确认回复
  - 指令仅对**授权发送者**(通道允许列表/配对加上 `commands.useAccessGroups`)应用
    未授权的发送者看到指令被视为纯文本

还有一些**内联快捷方式**(仅限允许列表/授权的发送者): `/help`, `/commands`, `/status`, `/whoami` (`/id`)
- 它们立即运行,在模型看到消息之前被剥离,剩余文本继续正常流程

## 配置

```json5
{
  commands: {
    native: "auto",
    nativeSkills: "auto",
    text: true,
    bash: false,
    bashForegroundMs: 2000,
    config: false,
    debug: false,
    restart: false,
    useAccessGroups: true,
  },
}
```

- `commands.text`(默认 `true`)在聊天消息中启用解析 `/...`
- `commands.native`(默认 `"auto"`)注册原生命令
  - Auto: 适用于 Discord/Telegram;Slack 关闭(直到你添加斜杠命令);对于没有原生支持的提供程序忽略
  - 设置 `channels.discord.commands.native`, `channels.telegram.commands.native`, 或 `channels.slack.commands.native` 以覆盖每个提供程序(bool 或 `"auto"`)
  - `false` 在 Discord/Telegram 启动时清除先前注册的命令.Slack 命令在 Slack 应用中管理,不会自动删除
- `commands.nativeSkills`(默认 `"auto"`)在支持时原生注册 **技能**命令
  - Auto: 适用于 Discord/Telegram;Slack 关闭(Slack 需要为每个内置命令创建一个斜杠命令)
  - 设置 `channels.discord.commands.nativeSkills`, `channels.telegram.commands.nativeSkills`, 或 `channels.slack.commands.nativeSkills` 以覆盖每个提供程序(bool 或 `"auto"`)
- `commands.bash`(默认 `false`)启用 `! <cmd>` 以运行主机 shell 命令(`! <command>` 的别名;需要 `tools.elevated` 允许列表)
- `commands.bashForegroundMs`(默认 `2000`)控制 bash 在切换到后台模式之前等待多久(`0` 立即后台)
- `commands.config`(默认 `false`)启用 `/config`(读取/写入 `openclaw.json`)
- `commands.debug`(默认 `false`)启用 `/debug`(仅运行时覆盖;所有者)
- `commands.restart`(默认 `false`)启用重启(默认禁用)
- `commands.useAccessGroups`(默认 `true`)对命令强制使用允许列表/策略

## 命令列表

### 文本 + 原生(启用时):

- `/help` - 显示帮助信息
- `/commands` - 列出所有可用命令
- `/skill <name> [input]` - 按名称运行技能
- `/status` - 显示当前状态;在可用时包括当前模型提供商的使用/配额
- `/allowlist` - 列出/添加/删除允许列表条目
- `/approve <id> allow-once|allow-always|deny` - 解决执行审批提示
- `/context [list|detail|json]` - 解释"上下文";`detail` 显示每个文件 + 每个工具 + 每个技能 + 系统提示大小
- `/whoami` - 显示你的发送者 id;别名:`/id`
- `/subagents list|stop|log|info|send` - 检查、停止、记录或为当前会话发送子 agent 运行
- `/config show|get|set|unset` - 将配置持久化到磁盘,所有者;需要 `commands.config: true`
- `/debug show|set|unset|reset` - 仅运行时覆盖,所有者;需要 `commands.debug: true`
- `/usage off|tokens|full|cost` - 每响应使用页脚或本地成本摘要
- `/tts off|always|inbound|tagged|status|provider|limit|summary|audio` - 控制 TTS;参见 [/tts](/tts))
  - Discord: 原生命令是 `/voice`(Discord 保留 `/tts`);文本 `/tts` 仍然有效
- `/stop` - 停止当前运行
- `/restart` - 重启 Gateway
- `/dock-telegram`(别名:`/dock_telegram`)(切换回复到 Telegram)
- `/dock-discord`(别名:`/dock_discord`)(切换回复到 Discord)
- `/dock-slack`(别名:`/dock_slack`)(切换回复到 Slack)
- `/activation mention|always` - (仅组)切换激活模式
- `/send on|off|inherit` - (所有者)控制发送策略
- `/reset` 或 `/new [model]` - (可选模型提示;其余部分通过)
- `/think <off|minimal|low|medium|high|xhigh>` - 按模型/提供商的动态选择;别名:`/thinking`, `/t`)
- `/verbose on|full|off` - (别名:`/v`)
- `/reasoning on|off|stream` - (别名:`/reason`;启用时,发送单独前缀为 `Reasoning:` 的消息;`stream` = 仅 Telegram 草稿)
- `/elevated on|off|ask|full` - (别名:`/elev`;`full` 跳过执行审批)
- `/exec host=<sandbox|gateway|node> security=<deny|allowlist|full> ask=<off|on-miss|always> node=<id>` - 发送 `/exec` 以显示当前设置
- `/model <name>` - (别名:`/models`;或 `agents.defaults.models.*.alias` 中的 `/<alias>`)
- `/queue <mode>` - (加上如 `debounce:2s cap:25 drop:summarize` 的选项;发送 `/queue` 以查看当前设置)
- `/bash <command>` - (仅主机);`! <command>` 的别名;需要 `commands.bash: true` + `tools.elevated` 允许列表)

### 仅文本:

- `/compact [instructions]` - 参见 [/concepts/compaction](/03-核心概念/06-上下文管理#compaction))
- `! <command>` - (仅主机);一次一个;使用 `!poll` + `!stop` 进行长时间运行的工作
- `!poll` - 检查输出 / 状态;接受可选 `sessionId`;`/bash poll` 也有效
- `!stop` - 停止运行的 bash 工作;接受可选 `sessionId`;`/bash stop` 也有效

## 使用提示

- 命令接受命令和参数之间可选的 `:`(例如 `/think: high`, `/send: on`, `/help:`)
- `/new <model>` 接受模型别名、提供商/模型或提供商名称(模糊匹配);如果没有匹配,文本将被视为消息正文
- 有关完整的使用情况细分,使用 `openclaw status --usage`
- `/usage` 控制每响应使用页脚;`/usage cost` 从 OpenClaw 会话日志打印本地成本摘要
- `/model status` 关于**模型/认证/端点**,而不是使用情况

## 调试覆盖

`/debug` 让你设置**仅运行时**配置覆盖(内存,而非磁盘)。所有者。默认禁用;使用 `commands.debug: true` 启用。

示例:

```
/debug show
/debug set messages.responsePrefix="[openclaw]"
/debug set channels.whatsapp.allowFrom=["+1555","+4477"]
/debug unset messages.responsePrefix
/debug reset
```

注意:

- 覆盖立即应用于新的配置读取,但**不**写入 `openclaw.json`
- 使用 `/debug reset` 清除所有覆盖并返回到磁盘配置

## 配置更新

`/config` 写入到你的磁盘配置(`openclaw.json`)。所有者。默认禁用;使用 `commands.config: true` 启用。

示例:

```
/config show
/config show messages.responsePrefix
/config get messages.responsePrefix
/config set messages.responsePrefix="[openclaw]"
/config unset messages.responsePrefix
```

注意:

- 配置在写入前经过验证;无效的更改被拒绝
- `/config` 更新在重启后持久化

## 表面说明

- **文本命令**在正常聊天会话中运行(DM 共享 `main`,组有自己的会话)
- **原生命令**使用隔离的会话:
  - Discord: `agent:<agentId>:discord:slash:<userId>`
  - Slack: `agent:<agentId>:slack:slash:<userId>`(前缀可通过 `channels.slack.slashCommand.sessionPrefix` 配置)
  - Telegram: `telegram:slash:<userId>`(通过 `CommandTargetSessionKey` 定位到聊天会话)
- **`/stop`**定位到活动的聊天会话,以便它可以中止当前的运行
- **Slack:**`channels.slack.slashCommand` 仍然支持单个 `/openclaw` 样式的命令。如果你启用 `commands.native`,你必须为每个内置命令创建一个 Slack 斜杠命令(相同名称为 `/help`)。Slack 的命令参数菜单作为暂态 Block Kit 按钮交付
- **快速路径:**允许列表发送者的仅命令消息立即运行(绕过队列 + 模型)
- **组提及控制:**仅命令消息从允许列表发送者绕过提及要求
- **内联快捷方式(仅限允许列表/授权的发送者):**某些命令也可以在嵌入到正常消息时工作,并在模型看到剩余文本之前被剥离
  - 示例:`hey /status` 触发状态回复,剩余文本继续正常流程

## 模型选择(`/model`)

`/model` 作为指令实现。

示例:

```
/model
/model list
/model 3
/model openai/gpt-5.2
/model opus@anthropic:default
/model status
```

注意:

- `/model` 和 `/model list` 显示紧凑的编号选择器(模型系列 + 可用提供商)
- `/model <#>` 从该选择器选择(并且在可能时偏好当前提供商)
- `/model status` 显示详细视图,包括配置的提供商端点(`baseUrl`)和 API 模式(`api`)在可用时

## 技能命令

`user-invocable` 技能作为斜杠命令公开。名称被清理为 `a-z0-9_`(最多 32 个字符);冲突获得数字后缀(例如 `_2`)。

- `/skill <name> [input]` 按名称运行技能(当原生命令限制阻止每个技能命令时有用)
- 默认情况下,技能命令作为正常请求转发到模型
- 技能可以选择声明 `command-dispatch: tool` 以将命令直接路由到工具(确定性,无模型)
  - 示例:`/prose`(OpenProse 插件) — 参见 [OpenProse](/prose)

## Bash 命令

仅限主机bash 命令使用 `! <cmd>`(将 `/bash <cmd>` 作为别名)。

- `! <command>` - 一次一个;使用 `!poll` + `!stop` 进行长时间运行的工作
  - 注意:对于长时间运行的工作,一次一个;使用 `!poll` + `!stop` 进行
- `!poll` - 检查输出 / 状态;接受可选 `sessionId`;`/bash poll` 也有效
- `!stop` - 停止运行的 bash 工作;接受可选 `sessionId`;`/bash stop` 也有效
- 使用 `!poll` + `!stop` 进行长后台作业,并使用 `!` 或 `!poll` 查看状态

## 重要注意事项

- `/think`(和 `/verbose`)在组设置中有风险:它们可能暴露内部推理或你不想暴露的工具输出。除非需要,否则让它们关闭,特别是在群聊中
- `/restart`默认禁用;设置 `commands.restart: true` 以启用
- `/verbose` 用于调试和额外可见性;在正常使用中保持 **关闭**
- `/usage` 控制每响应使用页脚
