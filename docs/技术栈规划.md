# 技术栈规划

> OpenClaw 中文文档 - VitePress + AI 搜索完整技术方案
> **创建时间**: 2026-02-01
> **状态**: 规划完成

---

## 一、总体架构设计

### 1.1 技术栈概览

```
┌─────────────────────────────────────────────────────────┐
│                   文档内容层                        │
│  (中文 Markdown，结构化组织）               │
└────────────────────┬────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────┐
│              VitePress 构建层                   │
│  (单语言，预留 i18n 接口）                │
│  ├─ vitepress-plugin-llms (LLM 优化）         │
│  └─ 自定义主题 (AI 友好 UI）                │
└────────────────────┬────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────┐
│              搜索优化层                        │
│  ├─ 快速：Local Search (MiniSearch)            │
│  ├─ 推荐：vitepress-knowledge (Google Gemini)     │
│  └─ 高级：可选集成 RAG (预留接口）         │
└────────────────────┬────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────┐
│            GitHub Pages 部署层                   │
│  (GitHub Actions 自动 CI/CD）                   │
└─────────────────────────────────────────────────────────┘
```

### 1.2 设计原则

**原则 1：渐进式升级路径**

```
入门阶段（免费、快速）
  → vitepress-plugin-search (Local Search)
  → vitepress-plugin-llms (LLM 优化）

推荐阶段（低成本、高质量）
  → vitepress-knowledge (自托管 + Google Gemini)
  → vitepress-plugin-llms (LLM 优化）

高级阶段（可选、高成本）
  → 自定义 RAG API + Qdrant
  → vitepress-plugin-llms (LLM 优化）
```

**原则 2：AI 与人类体验并重**
- ✅ 人类阅读：清晰的导航、美观的 UI、快速搜索
- ✅ AI 检索：结构化元数据、语义化分块、LLM 友好格式

**原则 3：预留国际化接口**
- 当前只实现中文（`zh-CN`）
- 配置文件预留 `locales` 接口
- 目录结构预留 `en/` 路径
- 后续添加英文时无需重构

**原则 4：成本可控**
- 入门阶段：完全免费
- 推荐阶段：$5-10/月（Google Gemini API）
- 高级阶段：可选，基于需求扩展

---

## 二、VitePress 配置方案

### 2.1 基础配置（单语言 + i18n 预留）

```typescript
// docs/.vitepress/config.ts
import { defineConfig } from 'vitepress'
import llmstxt from 'vitepress-plugin-llms'

// ========== 多语言预留接口 ==========
const locales = {
  'zh-CN': {
    label: '简体中文',
    lang: 'zh-CN',
    title: 'OpenClaw 中文文档',
    description: 'OpenClaw - 个人 AI 助手，支持多平台消息通道',
    themeConfig: {
      nav: [
        { text: '首页', link: '/' },
        { text: '快速开始', link: '/00-快速开始/' },
        { text: '基础使用', link: '/01-基础使用/' },
        { text: '消息通道', link: '/02-消息通道/' },
        { text: '核心概念', link: '/03-核心概念/' },
        { text: '配置与运维', link: '/04-配置与运维/' },
        { text: '自动化任务', link: '/05-自动化任务/' },
        { text: '工具与功能', link: '/06-工具与功能/' },
        { text: '平台指南', link: '/07-平台指南/' },
        { text: 'AI 模型', link: '/08-AI模型/' },
        { text: '开发者参考', link: '/09-开发者参考/' },
        { text: '命令行工具', link: '/10-命令行工具/' },
        { text: '附录', link: '/11-附录/' },
      ],
      sidebar: {
        '/00-快速开始/': [
          { text: '什么是 OpenClaw？', link: '/00-快速开始/01-什么是OpenClaw.md' },
          { text: '5分钟安装指南', link: '/00-快速开始/02-5分钟安装指南.md' },
          { text: '向导式配置', link: '/00-快速开始/03-向导式配置.md' },
          { text: '首次连接', link: '/00-快速开始/04-首次连接.md' },
          { text: '常见问题 FAQ', link: '/00-快速开始/05-常见问题FAQ.md' },
        ],
        // ... 其他章节的 sidebar
      },
      search: {
        provider: 'local',
        options: {
          translations: {
            button: '搜索文档',
            modal: {
              noResultsText: '无法找到相关结果',
              resetButtonTitle: '清除查询条件',
              footer: {
                selectText: '选择',
                navigateText: '切换'
              }
            }
          }
        }
      },
      footer: {
        message: '基于 MIT 协议发布',
        copyright: 'Copyright © 2024-present OpenClaw 社区'
      },
      editLink: {
        pattern: 'https://github.com/openclaw/openclaw/edit/main/docs/:path',
        text: '在 GitHub 上编辑此页'
      },
      lastUpdated: {
        text: '最后更新于',
        formatOptions: {
          dateStyle: 'short',
          timeStyle: 'medium'
        }
      }
    }
  },

  // ========== 英文预留（暂不实现）==========
  'en': {
    label: 'English',
    lang: 'en-US',
    title: 'OpenClaw Documentation',
    description: 'OpenClaw - Personal AI Assistant for Multi-Platform Messaging',
    themeConfig: {
      // TODO: 后续添加英文内容时实现
      nav: [],
      sidebar: {}
    }
  }
}

export default defineConfig({
  // ========== 基础配置 ==========
  title: 'OpenClaw 中文文档',
  description: 'OpenClaw - 个人 AI 助手，支持多平台消息通道',
  lang: 'zh-CN',
  
  // ========== 部署配置 ==========
  base: '/openclaw-docs/',  // GitHub Pages 子路径
  outDir: '.vitepress/dist',
  cacheDir: '.vitepress/cache',
  
  // ========== 多语言配置（当前仅中文）==========
  locales: {
    root: { label: '简体中文', lang: 'zh-CN', ...locales['zh-CN'] },
    en: { label: 'English', lang: 'en-US', link: '/en/', ...locales['en'] }
  },
  
  // ========== 插件配置 ==========
  vite: {
    plugins: [
      // LLM 优化（人类 + AI 友好）
      llmstxt({
        ignoreFiles: ['node_modules/*', '.*'],
        customTemplateVariables: {
          appName: 'OpenClaw',
          appUrl: 'https://docs.openclaw.ai',
          version: '1.0.0'
        },
        // 预留自定义标记支持
        customTags: {

<ai-search-key>
配置, 配置文件, openclaw.json, settings, setup
</ai-search-key>

## 配置文件说明

OpenClaw 的配置文件位于 `~/.openclaw/openclaw.json`...

<human-only>
<!-- 导航菜单和其他人类可见 UI 元素 -->
## 相关文档

- [快速配置示例](./01-快速配置示例.md)
- [完整配置参考](./02-完整配置参考.md)
- [配置故障排查](./09-故障排查.md)
</human-only>
```

### 4.3 自定义标签说明

| 标签 | 用途 | 示例 |
|------|------|------|
