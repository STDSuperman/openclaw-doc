---
title: "ä¼šè¯æ¨¡å‹"
category: "æ ¸å¿ƒæ¦‚å¿µ"
difficulty: "è¿›é˜¶"
estimated_time: "15åˆ†é’Ÿé˜…è¯»"
tags:
  - ä¼šè¯
  - å¯¹è¯å†å²
  - ä¸Šä¸‹æ–‡
  - æ¶ˆæ¯è·¯ç”±
prerequisites:
  - ["00-æ¶æ„æ¦‚è§ˆ"]
related_docs:
  ["ä¸Šä¸‹æ–‡ç®¡ç†", "å¤šæ™ºèƒ½ä½“è·¯ç”±", "æ¶ˆæ¯é€šé“"]
next_steps:
  - ["ä¸Šä¸‹æ–‡ç®¡ç†", "å¤šæ™ºèƒ½ä½“è·¯ç”±", "æ¶ˆæ¯é€šé“"]
last_updated: "2026-02-01"
source: "docs/start/wizard.md, docs/concepts/sessions.md"
---

# ä¼šè¯æ¨¡å‹

> **TL;DR**: OpenClaw ä½¿ç”¨**ä¼šè¯ï¼ˆSessionï¼‰** æ¥ç®¡ç†å¯¹è¯ä¸Šä¸‹æ–‡å’Œå†å²ï¼Œä¸åŒçš„æ¶ˆæ¯å¹³å°ä½¿ç”¨ç‹¬ç«‹çš„ä¼šè¯ã€‚

<ai-only>
**AI æŒ‡ä»¤åŒº**ï¼šæœ¬æ–‡æ¡£è¯´æ˜ OpenClaw çš„ä¼šè¯æ¨¡å‹è®¾è®¡åŸç†ã€ä¼šè¯ç±»å‹ã€è·¯ç”±è§„åˆ™å’Œé…ç½®æ–¹æ³•ã€‚
</ai-only>

## ä¼šè¯ç±»å‹

### 1. ä¸»ä¼šè¯ï¼ˆmainï¼‰

**ç”¨é€”**ï¼šé»˜è®¤çš„ä¸ªäººä¼šè¯ï¼Œç”¨äºç›´æ¥å¯¹è¯

**ç‰¹ç‚¹**ï¼š
- âœ… **æœ€é•¿å†å²**ï¼šä¿ç•™æ›´å¤šå¯¹è¯ä¸Šä¸‹æ–‡
- âœ… **å…¨å·¥å…·æƒé™**ï¼šå¯ä»¥æ‰§è¡Œæ‰€æœ‰å·¥å…·
- âœ… **ä¼˜å…ˆè·¯ç”±**ï¼šç›´æ¥æ¶ˆæ¯å’Œç§èŠä¼˜å…ˆè·¯ç”±åˆ°ä¸»ä¼šè¯
- âš ï¸ **å®‰å…¨é£é™©**ï¼šåœ¨å¤šç”¨æˆ·ç¯å¢ƒä¸‹ä¸æ¨è

**ä¼šè¯ Key æ ¼å¼**ï¼š
```
agent:main:whatsapp:dm:+86138000000
agent:main:telegram:+123456789
```

### 2. å¹³å°/ç¾¤ç»„ä¼šè¯

**ç”¨é€”**ï¼šæ¯ä¸ªæ¶ˆæ¯å¹³å°æˆ–ç¾¤ç»„æœ‰ç‹¬ç«‹çš„ä¼šè¯

**ç‰¹ç‚¹**ï¼š
- âœ… **éš”ç¦»æ€§**ï¼šä¸åŒä¼šè¯ç›¸äº’ç‹¬ç«‹
- âœ… **ä¸Šä¸‹æ–‡ç‹¬ç«‹**ï¼šæ¯ä¸ªä¼šè¯æœ‰è‡ªå·±çš„å†å²
- âœ… **å·¥å…·æƒé™æ§åˆ¶**ï¼šå¯ä»¥ä¸ºä¸åŒä¼šè¯é…ç½®ä¸åŒå·¥å…·æƒé™
- âœ… **æ²™ç›’æ”¯æŒ**ï¼šç¾¤ä¼šè¯å¯ä»¥åœ¨éš”ç¦»ç¯å¢ƒä¸­è¿è¡Œ

**ä¼šè¯ Key æ ¼å¼**ï¼š
```
agent:custom:whatsapp:group:123456789@g.us
agent:custom:telegram:-100123456789
```

### 3. æ™ºèƒ½ä½“ä¼šè¯ï¼ˆå¯é€‰ï¼‰

**ç”¨é€”**ï¼šæ ¹æ®å·¥ä½œåŒºæˆ–é…ç½®åˆ›å»ºçš„ä¸“ç”¨ä¼šè¯

**ç‰¹ç‚¹**ï¼š
- âœ… **è‡ªå®šä¹‰å·¥ä½œç©ºé—´**ï¼šç‹¬ç«‹çš„å·¥ä½œç©ºé—´å’Œæ–‡ä»¶
- âœ… **ç‰¹å®šæ¨¡å‹**ï¼šå¯ä»¥é…ç½®ä¸åŒçš„ AI æ¨¡å‹
- âœ… **ç‹¬ç«‹æŠ€èƒ½**ï¼šåªåŠ è½½ç‰¹å®šæŠ€èƒ½
- âœ… **ç‹¬ç«‹å·¥å…·é›†**ï¼šé™åˆ¶æˆ–æ‰©å±•å¯ç”¨å·¥å…·

**ä¼šè¯ Key æ ¼å¼**ï¼š
```
agent:workspace:my-agent
```

---

## ä¼šè¯ Key ç»“æ„

<ai-only>
ä¼šè¯ Key æ˜¯ OpenClaw è¯†åˆ«å’Œç®¡ç†ä¼šè¯çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œéµå¾ªä»¥ä¸‹æ ¼å¼ï¼š
</ai-only>

```
agent:<agent-id>:<channel-type>:<peer-identifier>
```

**ç»„ä»¶è¯´æ˜**ï¼š

- **agent**ï¼šæ™ºèƒ½ä½“ IDï¼ˆ`main`ã€`workspace:my-agent`ã€`custom:my-agent`ï¼‰
- **channel**ï¼šæ¶ˆæ¯é€šé“ç±»å‹ï¼ˆ`whatsapp`ã€`telegram`ã€`discord`ã€`imessage`ã€`webchat`ï¼‰
- **peer**ï¼šé€šé“ä¸­çš„å¯¹ç­‰æ–¹æ ‡è¯†ï¼ˆç”µè¯å·ç ã€ç”¨æˆ·åã€ç¾¤ç»„ IDã€è®¾å¤‡åï¼‰

**ç¤ºä¾‹**ï¼š
```
agent:main:whatsapp:dm:+86138000000              # ç§èŠä¼šè¯
agent:main:whatsapp:group:123456789@g.us       # ç¾¤èŠä¼šè¯
agent:main:telegram:+123456789                # Telegram ä¼šè¯
agent:main:discord:guild:987654321           # Discord é¢‘é“ä¼šè¯
agent:main:discord:dm:user-id              # Discord ç§èŠä¼šè¯
agent:custom:workspace:user1:webchat          # è‡ªå®šä¹‰ä¼šè¯ï¼ˆWebChatï¼‰
```

---

## ä¼šè¯ç”Ÿå‘½å‘¨æœŸ

### 1. åˆ›å»º

**è§¦å‘æ¡ä»¶**ï¼š
- æ”¶åˆ°æ–°æ¶ˆæ¯ï¼ˆWhatsApp/Telegram/Discordï¼‰
- ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨ï¼ˆé€šè¿‡é…ç½®çš„å…è®¸åˆ—è¡¨ï¼‰
- ç®¡ç†å‘˜æ˜ç¡®æˆæƒ

**ä¼šè¯ Key åˆ†é…**ï¼š
```bash
# è‡ªåŠ¨åˆ†é…ï¼ˆé»˜è®¤ï¼‰
openclaw message send --target +86138000000 --message "Hello"

# æŸ¥çœ‹ä¼šè¯ Key
openclaw sessions list

# è¾“å‡ºç¤ºä¾‹
agent:main:whatsapp:dm:+86138000000
```

### 2. æ¿€æ´»

**è§¦å‘æ¡ä»¶**ï¼š
- ç”¨æˆ·å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯
- ç®¡ç†å‘˜é…å¯¹ï¼ˆPairingï¼‰è¢«æ‰¹å‡†
- ç”¨æˆ·åœ¨å…è®¸åˆ—è¡¨ä¸­

**æ¿€æ´»çŠ¶æ€**ï¼š
- âœ… **Active**ï¼šä¼šè¯æ­£å¸¸ä½¿ç”¨
- â¸ï¸ **Pending**ï¼šç­‰å¾…é…å¯¹æ‰¹å‡†
- âŒ **Rejected**ï¼šé…å¯¹è¢«æ‹’ç»æˆ–è¶…æ—¶

### 3. å‘é€æ¶ˆæ¯

**æµç¨‹**ï¼š
```
ç”¨æˆ·ï¼ˆWhatsApp/Telegram/Discordï¼‰å‘é€æ¶ˆæ¯
  â†“
Gateway æ¥æ”¶å¹¶è·¯ç”±åˆ°å¯¹åº”ä¼šè¯
  â†“
å‘é€ç»™ Pi Agent å¤„ç†
  â†“
Pi Agent ç”Ÿæˆå“åº”
  â†“
Gateway å°†å“åº”è·¯ç”±å›æ¶ˆæ¯å¹³å°
  â†“
ç”¨æˆ·æ”¶åˆ° AI å›å¤
```

**æ¶ˆæ¯ç±»å‹æ”¯æŒ**ï¼š
- ğŸ“ **æ–‡æœ¬æ¶ˆæ¯**ï¼šçº¯æ–‡æœ¬å†…å®¹
- ğŸ–¼ï¸ **åª’ä½“æ¶ˆæ¯**ï¼šå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€æ–‡ä»¶
- ğŸ“Š **ç»“æ„åŒ–æ¶ˆæ¯**ï¼šè¡¨æ ¼ã€åˆ—è¡¨ç­‰
- ğŸ’¬ **äº¤äº’å¼æ¶ˆæ¯**ï¼šæŒ‰é’®ã€è¡¨å•ç­‰

---

## æ¶ˆæ¯è·¯ç”±

<ai-only>
**AI æŒ‡ä»¤åŒº**ï¼šOpenClaw çš„æ¶ˆæ¯è·¯ç”±ç³»ç»Ÿè´Ÿè´£å°†ç”¨æˆ·æ¶ˆæ¯æ­£ç¡®åˆ†å‘åˆ°å¯¹åº”çš„ä¼šè¯å’Œæ™ºèƒ½ä½“ã€‚
</ai-only>

### è·¯ç”±è§„åˆ™

**è§„åˆ™ 1ï¼šé»˜è®¤è·¯ç”±**

æ‰€æœ‰æœªåŒ¹é…çš„æ¶ˆæ¯è·¯ç”±åˆ° **main ä¼šè¯**ï¼š

```
ç§èŠæ¶ˆæ¯ â†’ agent:main:whatsapp:dm:<phone>
æœªæåŠæ¶ˆæ¯ â†’ agent:main:whatsapp:dm:<phone>
ç¾¤ç»„æ¶ˆæ¯ â†’ agent:main:whatsapp:group:<group-id>
```

**è§„åˆ™ 2ï¼šç»‘å®šè·¯ç”±**

é€šè¿‡é…ç½®å°†ç‰¹å®šçš„é¢‘é“æˆ–ç¾¤ç»„ç»‘å®šåˆ°ç‰¹å®šæ™ºèƒ½ä½“ï¼š

```json5
{
  "routing": {
    "bindings": [
      {
        "agent": "workspace:my-agent",
        "channel": "whatsapp",
        "group": "support-team"
      },
      {
        "agent": "workspace:assistant",
        "channel": "telegram",
        "peer": "@support-user"
      }
    ]
  }
}
```

---

## ä¼šè¯ç®¡ç†æ“ä½œ

### æŸ¥çœ‹ä¼šè¯

```bash
# åˆ—å‡ºæ‰€æœ‰ä¼šè¯
openclaw sessions list

# æŸ¥çœ‹ç‰¹å®šä¼šè¯çŠ¶æ€
openclaw sessions get --session "agent:main:whatsapp:dm:+86138000000"
```

**å“åº”ç¤ºä¾‹**ï¼š
```json5
{
  "sessions": [
    {
      "key": "agent:main:whatsapp:dm:+86138000000",
      "model": "anthropic/claude-opus-4-5",
      "created": "2026-01-01T00:00:00Z",
      "lastMessageAt": "2026-02-01T10:30:00Z",
      "messageCount": 42,
      "status": "active"
    }
  ]
}
```

### åˆ é™¤ä¼šè¯

```bash
# åˆ é™¤ç‰¹å®šä¼šè¯
openclaw sessions delete --session "agent:main:whatsapp:dm:+86138000000"

# æ¸…é™¤æ‰€æœ‰ä¼šè¯ï¼ˆå±é™©æ“ä½œï¼‰
openclaw sessions reset
```

**è­¦å‘Š**ï¼š
- âš ï¸ `sessions reset` ä¼šåˆ é™¤æ‰€æœ‰ä¼šè¯ï¼ŒåŒ…æ‹¬ä¸»ä¼šè¯ï¼
- ğŸ“‹ æ­¤æ“ä½œä¸å¯æ’¤é”€

---

## ä¼šè¯é…ç½®

### é»˜è®¤é…ç½®

```json5
{
  "session": {
    "defaultModel": "anthropic/claude-opus-4-5",
    "maxMessages": 100,  // æ¯ä¸ªä¼šè¯æœ€å¤šæ¶ˆæ¯æ•°
    "compactThreshold": 80,  // è¾¾åˆ°æ­¤æ•°é‡æ—¶è‡ªåŠ¨å‹ç¼©
    "idleTimeout": 1800  // 1800 ç§’æ— æ´»åŠ¨åè‡ªåŠ¨å…³é—­
    "autoCompact": true  // è‡ªåŠ¨å‹ç¼©æ—§æ¶ˆæ¯
  }
}
```

### é«˜çº§é…ç½®

**å¯ç”¨/ç¦ç”¨å‹ç¼©**ï¼š
```bash
# ä¸ºç‰¹å®šä¼šè¯ç¦ç”¨è‡ªåŠ¨å‹ç¼©
openclaw config set session.autoCompact false
```

**æ‰‹åŠ¨å‹ç¼©ä¼šè¯**ï¼š
```bash
# å‹ç¼©å½“å‰ä¼šè¯ä»¥é‡Šæ”¾ä¸Šä¸‹æ–‡
openclaw compact --session "agent:main:whatsapp:dm:+86138000000"
```

---

## ä¼šè¯éš”ç¦»ä¸æ²™ç›’

### æ²™ç›’æ¨¡å¼

**é…ç½®é€‰é¡¹**ï¼š
- `off`: ç¦ç”¨ï¼ˆæ‰€æœ‰ä¼šè¯åœ¨ä¸»æœºè¿è¡Œï¼‰
- `non-main`: ä»…éä¸»ä¼šè¯å¯ç”¨æ²™ç›’
- `always`: æ‰€æœ‰ä¼šè¯éƒ½å¯ç”¨æ²™ç›’

**é…ç½®ç¤ºä¾‹**ï¼š
```json5
{
  "agents": {
    "defaults": {
      "sandbox": {
        "mode": "non-main"  // éä¸»ä¼šè¯åœ¨éš”ç¦»ç¯å¢ƒä¸­è¿è¡Œ
      }
    }
  }
}
```

**æ²™ç›’å·¥å…·é™åˆ¶**ï¼š
å½“ä¼šè¯åœ¨æ²™ç›’æ¨¡å¼è¿è¡Œæ—¶ï¼Œä»¥ä¸‹å·¥å…·ä¼šå—é™æˆ–ç¦ç”¨ï¼š

| å·¥å…· | æ²™ç›’æ¨¡å¼é™åˆ¶ |
|------|----------------|
| **bash** | ä»…åœ¨ `~/.openclaw/workspace` æ‰§è¡Œ |
| **æ–‡ä»¶è¯»å†™** | ä»…è®¿é—®æ²™ç›’å·¥ä½œç©ºé—´ |
| **æµè§ˆå™¨æ§åˆ¶** | å®Œå…¨ç¦ç”¨ |
| **èŠ‚ç‚¹å‘½ä»¤** | ä»…åœ¨æœ¬åœ°è®¾å¤‡èŠ‚ç‚¹è¿è¡Œ |
| **exec** | ä»…é™å‘½ä»¤ï¼Œç¦æ­¢ä»»æ„è„šæœ¬ |

**å·¥ä½œç©ºé—´æ²™ç›’**ï¼š
```bash
# ä¸ºå·¥ä½œç©ºé—´é…ç½®æ²™ç›’
openclaw agents add workspace:sandbox \
  --workspace ~/.openclaw/workspace-sandbox
  --bind whatsapp:group:* \
  --allow bash,read,write,edit,process
```

---

## æœ€ä½³å®è·µ

### 1. ä¼šè¯ç®¡ç†

**æ¨èå®è·µ**ï¼š
- âœ… å®šæœŸå‹ç¼©æ—§ä¼šè¯èŠ‚çœå†…å­˜
- âœ… ä¸ºé•¿å¯¹è¯æ‰‹åŠ¨è§¦å‘å‹ç¼©
- âœ… åˆ é™¤ä¸æ´»è·ƒçš„æµ‹è¯•ä¼šè¯
- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„ä¼šè¯ Key å‘½åï¼ˆè€Œéä½¿ç”¨ `agent:main:xxx`ï¼‰

### 2. éšç§ä¸å®‰å…¨

**å®‰å…¨æç¤º**ï¼š
- âš ï¸ é¿å…åœ¨å…¬å¼€ç¾¤ç»„ä¸­ä½¿ç”¨ä¸»ä¼šè¯
- âš ï¸ ä¸ºä¸åŒå·¥ä½œåŒºä½¿ç”¨ç‹¬ç«‹çš„ä¼šè¯å’Œæ¨¡å‹
- âš ï¸ å®šæœŸæ£€æŸ¥å’Œåˆ é™¤ä¸æ´»è·ƒçš„ä¼šè¯
- âœ… å¯ç”¨æ²™ç›’æ¨¡å¼ä¿æŠ¤ç¾¤ç»„å’Œå…¬å¼€ä¼šè¯

### 3. æ€§èƒ½ä¼˜åŒ–

**ä¼˜åŒ–ç­–ç•¥**ï¼š
- âœ… åˆç†è®¾ç½® `maxMessages` é¿å…å†…å­˜æº¢å‡º
- âœ… è°ƒæ•´ `compactThreshold` å¹³è¡¡ä¸Šä¸‹æ–‡å’Œæ€§èƒ½
- âœ… ä½¿ç”¨ `idleTimeout` è‡ªåŠ¨æ¸…ç†é—²ç½®ä¼šè¯
- âœ… å®šæœŸé‡å¯ Gateway é‡Šæ”¾å†…å­˜

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šä¼šè¯æ— æ³•åˆ›å»º

**å¯èƒ½åŸå› **ï¼š
1. ç”¨æˆ·ä¸åœ¨å…è®¸åˆ—è¡¨ä¸­
2. DM é…å¯¹æœªæ‰¹å‡†
3. æ²™ç›’é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ£€æŸ¥ Gateway çŠ¶æ€
openclaw gateway status

# 2. æ£€æŸ¥ä¼šè¯çŠ¶æ€
openclaw sessions list

# 3. æ£€æŸ¥å…è®¸åˆ—è¡¨
openclaw config get channels.whatsapp.allowFrom

# 4. æ‰‹åŠ¨æ‰¹å‡†é…å¯¹
openclaw pairing approve whatsapp <code>
```

---

### é—®é¢˜ï¼šæ¶ˆæ¯ä¸å“åº”

**å¯èƒ½åŸå› **ï¼š
1. ä¼šè¯æœªæ¿€æ´»ï¼ˆPending çŠ¶æ€ï¼‰
2. Pi Agent æœªè¿è¡Œ
3. æ¨¡å‹é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ£€æŸ¥ä¼šè¯çŠ¶æ€
openclaw sessions get --session "agent:main:whatsapp:dm:+86138000000"

# 2. æ£€æŸ¥ Gateway æ—¥å¿—
openclaw logs | grep "agent:main"

# 3. æµ‹è¯•è¿æ¥
openclaw health
```

---

## ä¸‹ä¸€æ­¥æ–‡æ¡£

- [ä¸Šä¸‹æ–‡ç®¡ç†](./03-ä¸Šä¸‹æ–‡ç®¡ç†.md) - æ·±å…¥ç†è§£ä¸Šä¸‹æ–‡æ„å»ºå’Œä¼˜åŒ–
- [å¤šæ™ºèƒ½ä½“è·¯ç”±](./04-å¤šæ™ºèƒ½ä½“è·¯ç”±.md) - å­¦ä¹ è·¯ç”±è§„åˆ™å’Œé…ç½®
- [æ¶ˆæ¯é€šé“è¯¦è§£](../02-æ¶ˆæ¯é€šé“/) - æŸ¥çœ‹å„å¹³å°çš„ä¼šè¯å¤„ç†ç»†èŠ‚

---

<ai-search-key>
ä¼šè¯, å¯¹è¯æ¨¡å‹, ä¼šè¯ç±»å‹, ä¸»ä¼šè¯, ç¾¤ç»„ä¼šè¯, æ™ºèƒ½ä½“ä¼šè¯, ä¼šè¯ç®¡ç†, æ¶ˆæ¯è·¯ç”±, ç»‘å®šè·¯ç”±, ä¼šè¯ç”Ÿå‘½å‘¨æœŸ, æ²™ç›’æ¨¡å¼, å·¥ä½œç©ºé—´æ²™ç›’, æ€§èƒ½ä¼˜åŒ–, æœ€ä½³å®è·µ, æ•…éšœæ’æŸ¥, é…ç½®ç¤ºä¾‹
</ai-search-key>

**å…³é”®è¦ç‚¹æ€»ç»“**ï¼š
- ğŸ“± **ä¼šè¯ Key**ï¼š`agent:<agent-id>:<channel>:<peer>`
- ğŸ¯ **é»˜è®¤è·¯ç”±**ï¼šæœªåŒ¹é…æ¶ˆæ¯ â†’ main ä¼šè¯
- ğŸ” **æ²™ç›’æ¨¡å¼**ï¼šéä¸»ä¼šè¯éš”ç¦»è¿è¡Œï¼ˆå®‰å…¨ï¼‰
- âš™ï¸ **å®‰å…¨å»ºè®®**ï¼šå…¬å¼€ç¾¤ç»„é¿å…ä½¿ç”¨ä¸»ä¼šè¯

*æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ [æ–‡æ¡£å¯¼èˆª](../00-æ–‡æ¡£å¯¼èˆª.md)*
