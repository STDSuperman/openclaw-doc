---
title: "查看状态"
category: "基础使用"
difficulty: "入门"
estimated_time: "10分钟阅读"
tags:
  - 状态
  - 监控
  - 健康检查
  - Gateway
prerequisites:
  - "[已完成安装](../00-快速开始/02-5分钟安装指南.md)"
  - "[已完成配置](../00-快速开始/03-向导式配置.md)"
related_docs:
  - ["发送消息", "会话管理", "使用斜杠命令"]
next_steps:
  - ["帮助与调试"]
last_updated: "2026-02-01"
---

# 查看状态

> **TL;DR**: 使用 `openclaw status` 命令快速查看 Gateway、通道、会话和模型状态。

<ai-only>
**AI 指令区**：本文档说明如何查看 OpenClaw 系统状态、健康检查和诊断信息，用于监控和问题排查。
</ai-only>

## 基本状态查看

### openclaw status - 综合状态

**用途**：显示所有组件的当前状态

**基本用法**：
```bash
openclaw status
```

**输出示例**：
```
✓ Gateway: running (PID: 12345)
  ├─ 运行时间: 2h 45m
  └─ 版本: 1.0.0

✓ 模型配置:
  ├─ 默认模型: anthropic/claude-opus-4-5
  ├─ 已配置: 2 个提供商
  └─ 认证状态: ✅ OK

✓ 会话:
  ├─ 总数: 3
  ├─ 活跃: 3
  └─ 闲置: 0

✓ 通道:
  ├─ WhatsApp: ✅ 已连接
  ├─ Telegram: ✅ 已连接
  ├─ Discord: ⏸️ 未配置
  └─ iMessage: ⏸️ 未启用
```

---

## Gateway 状态

### Gateway 基础信息

```bash
# 查看 Gateway 运行状态
openclaw gateway status

# 输出示例
Gateway: running
PID: 12345
运行时间: 2h 45m
端口: 18789
绑定: 127.0.0.1
```

**状态说明**：

| 状态 | 说明 | 措施 |
|------|------|------|
| `running` | Gateway 正常运行 | 无需操作 |
| `stopped` | Gateway 未运行 | 启动 Gateway |
| `error` | Gateway 出错 | 查看日志诊断 |

---

## 通道状态

### 查看单个通道

```bash
# 查看 WhatsApp 状态
openclaw channels status whatsapp

# 查看 Telegram 状态
openclaw channels status telegram

# 查看 Discord 状态
openclaw channels status discord
```

### 查看所有通道

```bash
# 查看所有已配置通道的状态
openclaw channels status --all

# 输出示例
通道状态:
  ✅ WhatsApp: 已连接 (设备: Desktop Chrome)
  ✅ Telegram: 已连接 (Bot: @MyBot)
  ⏸️ Discord: 未配置
  ❌ Slack: 连接失败 (错误: 超时)
```

---

## 深度状态检查

### openclaw health - 健康检查

**用途**：执行全面的健康检查

```bash
# 基本健康检查
openclaw health

# 深度健康检查（包含通道探测）
openclaw health --probe
```

**输出示例**：
```
健康检查结果:

✓ Gateway: 健康
  ├─ WebSocket: ✅ 正常 (端口: 18789)
  └─ 进程状态: ✅ 运行中

✓ 认证:
  ├─ 模型认证: ✅ 有效
  └─ Gateway 令牌: ✅ 已配置

✓ 模型:
  ├─ 默认模型: anthropic/claude-opus-4-5
  ├─ 可用性: ✅ 可访问
  └─ 响应时间: 850ms

✓ 通道探测:
  ├─ WhatsApp: ✅ 已连接
  ├─ Telegram: ✅ 已连接
  ├─ Discord: ⏸️ 未配置
  └─ iMessage: ⏸️ 未启用

⚠️  警告:
  - Gateway 运行时间: 7天 2小时 (建议重启)
```

---

## 会话状态

### 查看活跃会话

```bash
# 列出所有活跃会话
openclaw sessions list

# 输出示例
会话列表:

1. agent:main:whatsapp:dm:+86138000000
   ├─ 通道: WhatsApp
   ├─ 对等方: +86138000000
   ├─ 模型: anthropic/claude-opus-4-5
   ├─ 创建: 2026-02-01T10:30:00Z
   ├─ 消息数: 23
   └─ 状态: ✅ 活跃

2. agent:main:telegram:+123456789
   ├─ 通道: Telegram
   ├─ 对等方: +123456789
   ├─ 模型: anthropic/claude-opus-4-5
   ├─ 创建: 2026-02-01T11:15:00Z
   ├─ 消息数: 15
   └─ 状态: ✅ 活跃
```

### 查看特定会话

```bash
# 获取会话详细信息
openclaw sessions get --session "agent:main:whatsapp:dm:+86138000000"

# 输出示例
会话详情:

Key: agent:main:whatsapp:dm:+86138000000
模型: anthropic/claude-opus-4-5
通道: WhatsApp
对等方: +86138000000
创建: 2026-02-01T10:30:00Z
最后消息: 2026-02-01T16:45:30Z
消息数: 23
上下文: 12,450 tok
状态: ✅ 活跃
沙盒模式: 否
```

---

## 日志查看

### 查看实时日志

```bash
# 查看最近的日志
openclaw logs --tail 50

# 查看特定会话的日志
openclaw logs --session "agent:main:whatsapp:dm:+86138000000"
```

### 按级别过滤日志

```bash
# 只查看错误日志
openclaw logs --level error

# 查看警告日志
openclaw logs --level warning

# 查看信息日志
openclaw logs --level info
```

### 日志级别说明

| 级别 | 说明 | 用途 |
|------|------|------|
| `error` | 错误日志 | 问题排查 |
| `warning` | 警告日志 | 潜在问题 |
| `info` | 信息日志 | 正常运行信息 |
| `debug` | 调试日志 | 开发和深度排查 |

---

## 状态代码

### Gateway 状态代码

| 代码 | 含义 | 建议 |
|------|------|------|
| `0` | 运行中 | 正常状态 |
| `1` | 停止 | 需要启动 |
| `2` | 启动中 | 等待启动完成 |
| `3` | 错误 | 查看日志诊断 |
| `4` | 降级 | 部分功能不可用 |

### 通道状态代码

| 代码 | 含义 | 说明 |
|------|------|------|
| `0` | 已连接 | 正常 |
| `1` | 连接中 | 正在建立连接 |
| `2` | 已断开 | 需要重新连接 |
| `3` | 错误 | 连接失败 |

---

## 监控脚本示例

### 自动健康检查

```bash
#!/bin/bash
# daily-health-check.sh - 每日健康检查脚本

TARGET="+86138000000"
GATEWAY_URL="ws://127.0.0.1:18789"

echo "[$(date)] 开始健康检查..."

# 执行健康检查
HEALTH=$(openclaw health --format json)
if [ $? -eq 0 ]; then
  # 解析 JSON 并发送通知
  STATUS=$(echo "$HEALTH" | grep -o '"status":"[^"]*"')
  
  openclaw message send --target "$TARGET" \
    --message "🏥 健康检查结果: $STATUS"
  
  echo "✓ 健康检查完成"
else
  openclaw message send --target "$TARGET" \
    --message "❌ 健康检查失败"
  
  echo "✗ 健康检查失败"
fi
```

---

### 资源监控

```bash
#!/bin/bash
# monitor-resources.sh - 资源监控脚本

echo "资源监控 (每 30 秒更新一次):"
echo "--------------------------------"

while true; do
  # 获取状态
  STATUS=$(openclaw status)
  
  # 提取关键信息
  UPTIME=$(echo "$STATUS" | grep -o "运行时间:.*" | cut -d: -f2)
  SESSIONS=$(echo "$STATUS" | grep -o "活跃:.*" | cut -d: -f2)
  
  # 显示摘要
  clear
  echo "📊 资源监控"
  echo "运行时间: $UPTIME"
  echo "活跃会话: $SESSIONS"
  echo "--------------------------------"
  
  sleep 30
done
```

---

## 故障排查指南

### 问题 1: Gateway 显示 stopped

**可能原因**：
1. 服务未启动
2. 进程崩溃
3. 配置错误导致启动失败

**解决方案**：
```bash
# 1. 查看服务状态
sudo systemctl status openclaw-gateway

# 2. 查看日志
openclaw logs --tail 100

# 3. 检查配置
openclaw doctor

# 4. 重新启动服务
sudo systemctl restart openclaw-gateway
```

---

### 问题 2: 通道连接失败

**可能原因**：
1. 网络连接问题
2. Token 配置错误
3. 通道服务不可用

**解决方案**：
```bash
# 1. 检查网络连接
ping api.telegram.org
ping wa.me

# 2. 重新配置通道
openclaw channels configure telegram

# 3. 查看详细错误
openclaw channels status telegram --verbose
```

---

### 问题 3: 健康检查超时

**可能原因**：
1. Gateway 未运行
2. WebSocket 连接失败
3. 防火墙阻止

**解决方案**：
```bash
# 1. 检查 Gateway 状态
openclaw gateway status

# 2. 测试端口连接
telnet localhost 18789

# 3. 检查防火墙
sudo ufw status

# 4. 查看 Gateway 日志
openclaw logs | grep -i "error"
```

---

## 下一步文档

- [帮助与调试](./05-帮助与调试.md) - 深入诊断和问题排查
- [会话管理](./03-会话管理.md) - 学习会话的详细操作
- [发送消息](./01-发送消息.md) - 通过命令发送消息
- [使用斜杠命令](./02-使用斜杠命令.md) - 查看所有可用命令

---

**状态查看要点总结**：
- 📊 **综合状态**：`openclaw status` 显示所有组件状态
- 🏥 **健康检查**：`openclaw health` 执行全面诊断
- 📱 **通道状态**：单独或批量查看通道连接状态
- 💬 **会话管理**：列出和获取会话详细信息
- 📝 **日志查看**：实时查看和过滤系统日志
- 🔧 **监控脚本**：自动化健康检查和资源监控
- ❓ **问题排查**：常见错误和解决方案指南

*更多信息请参考 [文档导航](../00-文档导航.md)*
