---
title: "å‘é€æ¶ˆæ¯"
category: "åŸºç¡€ä½¿ç”¨"
difficulty: "å…¥é—¨"
estimated_time: "10åˆ†é’Ÿé˜…è¯»"
tags:
  - å‘é€æ¶ˆæ¯
  - CLI
  - æ¶ˆæ¯å¹³å°
prerequisites:
  - "[å·²å®Œæˆå®‰è£…](../00-å¿«é€Ÿå¼€å§‹/02-5åˆ†é’Ÿå®‰è£…æŒ‡å—.md)"
  - "[å·²å®Œæˆé…ç½®](../00-å¿«é€Ÿå¼€å§‹/03-å‘å¯¼å¼é…ç½®.md)"
  - "[å®Œæˆé¦–æ¬¡è¿æ¥](../00-å¿«é€Ÿå¼€å§‹/04-é¦–æ¬¡è¿æ¥.md)"
related_docs:
  - ["æ–œæ å‘½ä»¤", "ä¼šè¯ç®¡ç†"]
next_steps:
  - ["æ–œæ å‘½ä»¤", "æŸ¥çœ‹çŠ¶æ€", "ä¼šè¯ç®¡ç†"]
last_updated: "2026-02-01"
---

# å‘é€æ¶ˆæ¯

> **TL;DR**: ä½¿ç”¨ `openclaw message send` å‘½ä»¤é€šè¿‡ OpenClaw å‘é€æ¶ˆæ¯åˆ°è¿æ¥çš„æ¶ˆæ¯å¹³å°ã€‚


## åŸºæœ¬ç”¨æ³•

### æœ€ç®€å•çš„æ¶ˆæ¯å‘é€

```bash
# å‘é€æ–‡æœ¬æ¶ˆæ¯
openclaw message send --target +86138000000 --message "Hello from OpenClaw!"

# å‘é€ç»™ Telegram ç”¨æˆ·
openclaw message send --target @your_username --message "Hello!"

# å‘é€åˆ° Discord é¢‘é“
openclaw message send --target #general --message "Hello everyone!"
```

## å‚æ•°è¯´æ˜

| å‚æ•° | å¿…éœ€/å¯é€‰ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------------|------|------|
| `--target` | å¿…éœ€ | ç›®æ ‡æ¥æ”¶æ–¹ï¼ˆæ ¹æ®é€šé“ç±»å‹ï¼‰ | `+86138000000`ã€`@username`ã€`#channel` |
| `--message` | å¿…éœ€ | æ¶ˆæ¯å†…å®¹ | `"Hello World!"` |
| `--channel` | å¯é€‰ | æŒ‡å®šæ¶ˆæ¯é€šé“ | `whatsapp`ã€`telegram`ã€`discord` |
| `--session` | å¯é€‰ | æŒ‡å®šä¼šè¯ï¼ˆé»˜è®¤ä½¿ç”¨è·¯ç”±è§„åˆ™ï¼‰ | `agent:main:whatsapp:dm:+86138000000` |
| `--idempotency-key` | å¯é€‰ | é˜²æ­¢é‡å¤å‘é€ | `"unique-key-123"` |
| `--json` | å¯é€‰ | ä½¿ç”¨ JSON æ ¼å¼è¾“å…¥ | - |

---

## æ¶ˆæ¯ç±»å‹æ”¯æŒ

### 1. çº¯æ–‡æœ¬æ¶ˆæ¯

```bash
openclaw message send --target +86138000000 \
  --message "ä½ å¥½ï¼è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ã€‚"
```

### 2. Markdown æ ¼å¼åŒ–æ¶ˆæ¯

OpenClaw æ”¯æŒæ ‡å‡† Markdown è¯­æ³•ï¼š

```bash
openclaw message send --target +86138000000 \
  --message "**ç²—ä½“æ–‡æœ¬** å’Œ *æ–œä½“æ–‡æœ¬*

- åˆ—è¡¨é¡¹ 1
- åˆ—è¡¨é¡¹ 2

\`\`\`ä»£ç \`\`

[é“¾æ¥æ–‡å­—](https://example.com)"
```

**æ”¯æŒçš„ Markdown å…ƒç´ **ï¼š
- âœ… **ç²—ä½“**ï¼š`**text**`
- âœ… **æ–œä½“**ï¼š`*text*`
- âœ… **ä»£ç **ï¼š`` `code` ``
- âœ… **é“¾æ¥**ï¼š`[text](url)`
- âœ… **åˆ—è¡¨**ï¼š`- item` æˆ– `* item`
- âœ… **å¼•ç”¨**ï¼š`> quote`
- âœ… **ä»£ç å—**ï¼š``` `code block` ```

### 3. å¤šè¡Œæ¶ˆæ¯

ä½¿ç”¨æ¢è¡Œç¬¦æˆ– Here-Doc åˆ›å»ºå¤šè¡Œæ¶ˆæ¯ï¼š

```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨ \n
openclaw message send --target +86138000000 \
  --message "ç¬¬ä¸€è¡Œ\nç¬¬äºŒè¡Œ\nç¬¬ä¸‰è¡Œ"

# æ–¹æ³• 2ï¼šä½¿ç”¨ Here-Doc
openclaw message send --target +86138000000 --message <<EOF
ç¬¬ä¸€è¡Œ
ç¬¬äºŒè¡Œ
ç¬¬ä¸‰è¡Œ
EOF
```

### 4. ç¨‹åºåŒ–è¾“å…¥ï¼ˆJSON æ ¼å¼ï¼‰

```bash
# ä½¿ç”¨ --json å‚æ•°
openclaw message send --json --channel whatsapp <<EOF
{
  "target": "+86138000000",
  "message": "ä½ å¥½ï¼Œè¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ã€‚",
  "session": "agent:main:whatsapp:dm:+86138000000"
}
EOF
```

---

## é«˜çº§åŠŸèƒ½

### 1. å¹‚ç­‰æ€§æ”¯æŒï¼ˆé˜²æ­¢é‡å¤ï¼‰

ä½¿ç”¨å¹‚ç­‰é”®é˜²æ­¢æ„å¤–é‡å¤å‘é€ï¼š

```bash
openclaw message send \
  --target +86138000000 \
  --message "é‡è¦æ¶ˆæ¯" \
  --idempotency-key "msg-$(date +%s)"
```

**å¹‚ç­‰æœºåˆ¶**ï¼š
- âœ… ç›¸åŒå¹‚ç­‰é”®çš„è¯·æ±‚ä¼šè¿”å›ç¼“å­˜ç»“æœ
- âœ… ç¼“å­˜æœ‰æ•ˆæœŸï¼š5 åˆ†é’Ÿ
- âœ… é€‚ç”¨äº API è°ƒç”¨å’Œè‡ªåŠ¨åŒ–è„šæœ¬

### 2. ä¼šè¯æŒ‡å®š

```bash
# å‘é€åˆ°ç‰¹å®šä¼šè¯
openclaw message send \
  --target +86138000000 \
  --message "ç‰¹å®šä¼šè¯æ¶ˆæ¯" \
  --session "agent:custom:workspace:user1:webchat"
```

**ä¼šè¯ Key æ ¼å¼**ï¼š
```
agent:<agent-id>:<channel>:<peer-identifier>
```

**ç¤ºä¾‹ä¼šè¯**ï¼š
- `agent:main:whatsapp:dm:+86138000000` - ä¸»ä¼šè¯ï¼Œç§èŠ
- `agent:main:whatsapp:group:123456789@g.us` - ä¸»ä¼šè¯ï¼Œç¾¤èŠ
- `agent:custom:workspace:user1:telegram` - è‡ªå®šä¹‰ä¼šè¯

### 3. å“åº”æµå¼è¾“å‡º

å®æ—¶æŸ¥çœ‹ AI å“åº”ç”Ÿæˆï¼š

```bash
openclaw message send --target +86138000000 \
  --message "è¯·ç”Ÿæˆä¸€ä¸ªéšæœºæ•°" \
  --stream
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
âœ“ æ¶ˆæ¯å·²å‘é€
ğŸ“Š æ­£åœ¨ç”Ÿæˆå“åº”...

[æµå¼è¾“å‡ºå¼€å§‹]
ç”Ÿæˆçš„éšæœºæ•°ï¼š42
[æµå¼è¾“å‡ºå®Œæˆ]
```

---

## é€šé“ç‰¹å®šç›®æ ‡æ ¼å¼

### WhatsApp

```bash
# ç§èŠï¼ˆç”µè¯å·ç ï¼Œå¸¦å›½å®¶ä»£ç ï¼‰
openclaw message send --target +86138000000 --message "Hello"

# ç¾¤èŠï¼ˆä½¿ç”¨ç¾¤ç»„ IDï¼‰
openclaw message send --target "123456789@g.us" --message "Hello group"
```

### Telegram

```bash
# ç§èŠï¼ˆç”¨æˆ·åæˆ– @ï¼‰
openclaw message send --target @username --message "Hello"

# ç¾¤ç»„ï¼ˆä½¿ç”¨ç¾¤ç»„ç”¨æˆ·åï¼‰
openclaw message send --target @group_name --message "Hello group"
```

### Discord

```bash
# é¢‘é“ï¼ˆä½¿ç”¨ #ï¼‰
openclaw message send --target #general --message "Hello channel"

# ç§èŠï¼ˆä½¿ç”¨ç”¨æˆ· IDï¼‰
openclaw message send --target 123456789012345 --message "Hello DM"
```

---

## å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šå®šæ—¶é—®å€™

```bash
# æ¯å¤©æ—©ä¸Š 9 ç‚¹å‘é€é—®å€™
echo "0 9 * * * $(date +\%m) $(date +\%d) openclaw message send --target +86138000000 --message 'æ—©ä¸Šå¥½ï¼ä»Šå¤©æ˜¯ $(date +\%m)æœˆ$(date +\%d)æ—¥ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ'" | crontab -
```

### åœºæ™¯ 2ï¼šæ‰¹é‡é€šçŸ¥

```bash
# ä»æ–‡ä»¶è¯»å–å¹¶å‘é€å¤šä¸ªäºº
while read -r phone; do
  openclaw message send --target "$phone" \
    --message "ç³»ç»Ÿç»´æŠ¤é€šçŸ¥ï¼šå°†äºä»Šæ™š 22:00 è¿›è¡Œç³»ç»Ÿç»´æŠ¤ã€‚"
done < phone_list.txt
```

### åœºæ™¯ 3ï¼šè°ƒè¯•æµ‹è¯•

```bash
# æµ‹è¯•ä¸åŒé€šé“è¿æ¥çŠ¶æ€
for channel in whatsapp telegram discord; do
  openclaw message send \
    --channel "$channel" \
    --target "test-target" \
    --message "æµ‹è¯•æ¶ˆæ¯ï¼š$channel é€šé“è¿æ¥æ­£å¸¸"
done
```

---

## é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|----------|------|----------|
| `Unknown channel: xxx` | é€šé“æœªé…ç½®æˆ–æœªè¿æ¥ | æ£€æŸ¥ `openclaw channels status xxx` |
| `No active session for target` | ç›®æ ‡æ²¡æœ‰æ´»è·ƒä¼šè¯ | æ£€æŸ¥ `openclaw sessions list` |
| `Target not in allowlist` | ç›®æ ‡ä¸åœ¨å…è®¸åˆ—è¡¨ä¸­ | æ·»åŠ åˆ°å…è®¸åˆ—è¡¨æˆ–é…ç½®é…å¯¹ |
| `Gateway not running` | Gateway æœªå¯åŠ¨ | è¿è¡Œ `openclaw gateway` æˆ–æ£€æŸ¥æœåŠ¡çŠ¶æ€ |

### è°ƒè¯•å‘½ä»¤

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
openclaw message send --target +86138000000 \
  --message "æµ‹è¯•" \
  --verbose

# æ£€æŸ¥ Gateway è¿æ¥çŠ¶æ€
openclaw gateway status

# æµ‹è¯•æ‰€æœ‰é€šé“è¿æ¥
openclaw channels status --all
```

---

## ä¸å¯¹è¯å¯¹æ¯”

| åŠŸèƒ½ | `message send` | å¯¹è¯ä¸­ç›´æ¥å‘é€ |
|------|---------------|------------------|
| **æ¥æº** | CLI å‘½ä»¤ | æ¶ˆæ¯å¹³å°ï¼ˆWhatsApp/Telegramï¼‰ |
| **è§¦å‘æ–¹å¼** | æ‰‹åŠ¨æ‰§è¡Œ/è„šæœ¬è‡ªåŠ¨ | ç”¨æˆ·ç›´æ¥åœ¨èŠå¤©ä¸­è¾“å…¥ |
| **å“åº”æ–¹å¼** | è¾“å‡ºåˆ°ç»ˆç«¯æˆ–æµå¼ | ç›´æ¥åœ¨èŠå¤©ä¸­å›å¤ |
| **é€‚ç”¨åœºæ™¯** | æ‰¹é‡é€šçŸ¥ã€å®šæ—¶ä»»åŠ¡ã€æµ‹è¯• | æ—¥å¸¸å¯¹è¯ã€æé—® |
| **ä¼šè¯** | å¯æŒ‡å®šä¼šè¯ | è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”ä¼šè¯ |

---

## æ€§èƒ½ä¼˜åŒ–

### æ‰¹é‡å‘é€ä¼˜åŒ–

å‘é€å¤§é‡æ¶ˆæ¯æ—¶çš„ä¼˜åŒ–å»ºè®®ï¼š

```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨åå°è¿›ç¨‹å‘é€
openclaw message send --target +86138000000 \
  --message "æ‰¹é‡æ¶ˆæ¯ 1" \
  --background

# æ–¹æ³• 2ï¼šä½¿ç”¨å¹‚ç­‰é”®é¿å…é‡å¤
for i in {1..100}; do
  openclaw message send --target +86138000000 \
    --message "æ‰¹é‡æ¶ˆæ¯ $i" \
    --idempotency-key "batch-msg-$i"
done
```

---

## å®‰å…¨å»ºè®®

### 1. ä¿æŠ¤æ•æ„Ÿä¿¡æ¯

```bash
# âŒ é”™è¯¯ï¼šå‘½ä»¤è¡Œä¸­ç›´æ¥æš´éœ²å¯†é’¥
openclaw message send --target +86138000000 \
  --message "API Key: sk-ant-xxx"

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡
export API_KEY="sk-ant-xxx"
openclaw message send --target +86138000000 \
  --message "è¯·æ£€æŸ¥é…ç½®å®Œæˆ"
```

### 2. éªŒè¯ç›®æ ‡

```bash
# å‘é€å‰éªŒè¯ç›®æ ‡æ ¼å¼
validate_target() {
  local target="$1"
  case "$target" in
    +[0-9]*) return "whatsapp";;
    @*) return "telegram";;
    \#*) return "discord";;
    *) return "unknown";;
  esac
}

# ä½¿ç”¨éªŒè¯å‡½æ•°
channel=$(validate_target "+86138000000")
echo "ç›®æ ‡ç±»å‹: $channel"
```

---

## ä¸‹ä¸€æ­¥æ–‡æ¡£

- [æ–œæ å‘½ä»¤](./02-ä½¿ç”¨æ–œæ å‘½ä»¤.md) - å­¦ä¹ ä½¿ç”¨å¿«æ·å‘½ä»¤
- [ä¼šè¯ç®¡ç†](./03-ä¼šè¯ç®¡ç†.md) - ç†è§£ä¼šè¯çš„æŸ¥çœ‹å’Œç®¡ç†
- [æŸ¥çœ‹çŠ¶æ€](./04-æŸ¥çœ‹çŠ¶æ€.md) - ç›‘æ§ Gateway å’Œé€šé“çŠ¶æ€
- [è‡ªåŠ¨åŒ–ä»»åŠ¡](../05-è‡ªåŠ¨åŒ–ä»»åŠ¡/) - è®¾ç½®å®šæ—¶å’Œè§¦å‘ä»»åŠ¡

---

**å‘é€æ¶ˆæ¯è¦ç‚¹æ€»ç»“**ï¼š
- ğŸ“± **åŸºæœ¬å‘½ä»¤**ï¼š`openclaw message send --target <target> --message <content>`
- ğŸ“ **Markdown æ”¯æŒ**ï¼šå®Œæ•´æ ¼å¼åŒ–æ”¯æŒ
- ğŸ” **å¹‚ç­‰æ€§**ï¼šé˜²æ­¢é‡å¤å‘é€
- ğŸ¯ **ä¼šè¯æŒ‡å®š**ï¼šç²¾ç¡®æ§åˆ¶æ¶ˆæ¯å‘é€ç›®æ ‡
- ğŸš€ **æ‰¹é‡æ”¯æŒ**ï¼šè‡ªåŠ¨åŒ–è„šæœ¬å‹å¥½
- âš ï¸ **é”™è¯¯å¤„ç†**ï¼šè¯¦ç»†é”™è¯¯æç¤ºå’Œè°ƒè¯•é€‰é¡¹

*æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ [æ–‡æ¡£å¯¼èˆª](../00-æ–‡æ¡£å¯¼èˆª.md)*
