---
title: "配置参考"
category: "开发者参考"
difficulty: "advanced"
estimated_time: "20 min"
tags: ["配置", "json", "配置文件", "开发者"]
prerequisites: ["核心概念"]
related_docs: ["Hooks参考", "配置文件说明"]
next_steps: ["Hooks参考"]
last_updated: "2026-01-01"
source: "docs/reference/configuration.md, docs/concepts/CONTEXT.md"
---


# 配置参考

## 配置文件位置

- **主配置**: `~/.openclaw/openclaw.json`
- **环境变量**: 可用于覆盖特定配置
- **代理配置**: `~/.openclaw/proxies.json`(可选)

## 配置结构

```json5
{
  // Gateway 配置
  gateway: {
    bind: "loopback",
    port: 18789,
    mode: "local",
    tailscale: { mode: "off" },
    auth: { mode: "password" },
    remote: { host: null, port: 22 },
  },

  // Agent 配置
  agents: {
    defaults: {
      workspace: "~/.openclaw/workspace",
      model: "anthropic/claude-opus-4-5",
      thinking: "medium",
      verbose: "off",
      heartbeat: {
        every: "30m",
        target: "last",
        activeHours: { start: "08:00", end: "22:00" },
      },
      sandbox: {
        mode: "non-main",
      },
      bootstrapMaxChars: 20000,
    },
    // 特定 agent 配置通过 agent ID
    // 例如: "ops" agent
  },

  // 通道配置
  channels: {
    whatsapp: { allowFrom: [] },
    telegram: { botToken: "", groups: {} },
    discord: { token: "", dm: { allowFrom: [] } },
    slack: { botToken: "", appToken: "", dm: { allowFrom: [] } },
    // ...其他通道
  },

  // 工具配置
  tools: {
    browser: { enabled: true },
    canvas: { enabled: true },
    nodes: { enabled: true },
    // ...其他工具
  },

  // 自动化配置
  cron: {
    enabled: true,
    store: "~/.openclaw/cron/jobs.json",
    maxConcurrentRuns: 1,
  },

  // Webhook 配置
  hooks: {
    enabled: true,
    token: "your-secret-token",
    path: "/hooks",
    presets: ["gmail"],
  },

  // 命令配置
  commands: {
    text: true,
    native: "auto",
    bash: false,
    bashForegroundMs: 2000,
    config: false,
    debug: false,
    restart: false,
    useAccessGroups: true,
  },

  // 日志配置
  logging: {
    level: "info",
  },
}
```

## Gateway 配置

### 网络绑定

- `gateway.bind`: `"loopback"` | `"0.0.0.0"` - Gateway 绑定地址
- `gateway.port`: `18789` - Gateway WebSocket 端口

### 认证模式

- `gateway.auth.mode`: `"password"` | `"none"` - Gateway 认证模式

### 远程访问

- `gateway.remote.host`: 主机名或 IP(可选)
- `gateway.remote.port`: SSH 端口(默认 `22`)

### Tailscale 集成

- `gateway.tailscale.mode`: `"off"` | `"serve"` | `"funnel"`
- `gateway.tailscale.resetOnExit`: `false` - 退出时重置

## Agent 配置

### 默认设置

- `agents.defaults.workspace`: 工作空间目录
- `agents.defaults.model`: 默认模型
- `agents.defaults.thinking`: 默认思考级别
- `agents.defaults.verbose`: 默认详细级别
- `agents.defaults.timeoutSeconds`: 默认超时时间

### 心跳配置

- `agents.defaults.heartbeat.every`: 心跳间隔(默认 "30m")
- `agents.defaults.heartbeat.target`: 心跳投递目标(默认 "last")
- `agents.defaults.heartbeat.activeHours`: 心跳活动时间

### 沙盒配置

- `agents.defaults.sandbox.mode`: 沙盒模式
  - `"off"` - 禁用沙盒
  - `"non-main"` - 非主会话使用沙盒
  - `"always"` - 所有会话使用沙盒

### Bootstrap 配置

- `agents.defaults.bootstrapMaxChars`: Bootstrap 文件最大字符数(默认 `20000`)

## 通道配置

### WhatsApp

- `channels.whatsapp.allowFrom`: 允许的发送者列表
- `channels.whatsapp.groups`: 组策略

### Telegram

- `channels.telegram.botToken`: Bot token
- `channels.telegram.groups`: 组配置
- `channels.telegram.allowFrom`: 允许的发送者列表

### Discord

- `channels.discord.token`: Bot token
- `channels.discord.dm.allowFrom`: DM 允许列表
- `channels.discord.guilds`: 服务器配置

### Slack

- `channels.slack.botToken`: Bot token
- `channels.slack.appToken`: App token
- `channels.slack.dm.allowFrom`: DM 允许列表

## 工具配置

### 浏览器

- `tools.browser.enabled`: 启用浏览器控制
- `tools.browser.color`: 浏览器颜色

### Canvas

- `tools.canvas.enabled`: 启用 Canvas

### 节点

- `tools.nodes.enabled`: 启用节点功能

## 自动化配置

### Cron

- `cron.enabled`: 启用定时任务
- `cron.store`: 任务存储位置
- `cron.maxConcurrentRuns`: 最大并发运行数

### Webhooks

- `hooks.enabled`: 启用 Webhooks
- `hooks.token`: Webhook token
- `hooks.path`: Webhook 路径

## 命令配置

- `commands.text`: 启用文本命令解析
- `commands.native`: 原生命令注册
- `commands.nativeSkills`: 技能命令注册
- `commands.bash`: 启用 Bash 命令
- `commands.config`: 启用配置命令
- `commands.debug`: 启用调试命令

## 日志配置

- `logging.level`: 日志级别(`"debug"` | `"info"` | `"warn"` | `"error"`)

## 环境变量

可用环境变量以覆盖配置:

- `OPENCLAW_CONFIG_PATH`: 覆盖配置文件路径
- `OPENCLAW_WORKSPACE`: 覆盖工作空间目录
- `OPENCLAW_MODEL`: 覆盖默认模型
- `OPENCLAW_THINKING`: 覆盖默认思考级别
- `OPENCLAW_SKIP_CRON`: 禁用 cron
- `OPENCLAW_SKIP_GMAIL_WATCHER`: 禁用 Gmail watcher

## 配置验证

使用 `openclaw config validate` 验证配置文件语法和值。
